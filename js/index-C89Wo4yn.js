import{c as w,d as y,o as x,i as e,j as l,V as c,bX as v,dp as S,b7 as U}from"./index-DSr6uqVi.js";import{R as _}from"./rotate-ccw-1vqNTEgr.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=w("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),h="mx-admin:setup-api:url",p="mx-admin:setup-api:gateway",D=y({setup(){const a=x({apiUrl:localStorage.getItem("__api")||`${location.protocol}//${location.host}/api/v2`,gatewayUrl:localStorage.getItem("__gateway")||`${location.protocol}//${location.host}`,persist:!0}),r=()=>{const{apiUrl:t,gatewayUrl:n,persist:f}=a,s=m(t),o=m(n);f?(s&&localStorage.setItem("__api",s),o&&localStorage.setItem("__gateway",o)):(s&&sessionStorage.set("__api",s),o&&sessionStorage.set("__gateway",o)),localStorage.setItem(h,JSON.stringify([...new Set(i.concat(t))])),localStorage.setItem(p,JSON.stringify([...new Set(i.concat(n))]));const u=new URL(location.href);u.hash="#/dashboard",location.href=u.toString(),location.reload()},d=()=>{localStorage.removeItem("__api"),localStorage.removeItem("__gateway"),sessionStorage.removeItem("__api"),sessionStorage.removeItem("__gateway"),location.href=location.pathname,location.hash=""},g=()=>{a.apiUrl="http://localhost:2333",a.gatewayUrl="http://localhost:2333"},i=JSON.safeParse(localStorage.getItem(h)||"[]"),b=JSON.safeParse(localStorage.getItem(p)||"[]");return()=>e("div",{class:"flex min-h-screen flex-col items-center justify-center p-4"},[e("div",{class:"mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-white/20 text-white backdrop-blur-md"},[e(k,{class:"h-10 w-10","aria-hidden":"true"},null)]),e("h1",{class:"mb-2 text-xl font-medium tracking-wide text-white drop-shadow-lg"},[l("设置 API")]),e("p",{class:"mb-8 text-sm text-white/70"},[l("配置后端服务地址")]),e("div",{class:"w-full max-w-md rounded-2xl border border-white/20 bg-white/10 p-6 backdrop-blur-xl"},[e("form",{onSubmit:t=>{t.preventDefault(),r()}},[e("div",{class:"mb-4"},[e("label",{for:"api-url",class:"mb-2 block text-sm font-medium text-white/90"},[l("API 地址")]),e(c,{options:i.map(t=>({key:t,value:t,label:t})),filterable:!0,tag:!0,clearable:!0,value:a.apiUrl,onUpdateValue:t=>{a.apiUrl=t},class:"setup-api-select"},null)]),e("div",{class:"mb-4"},[e("label",{for:"gateway-url",class:"mb-2 block text-sm font-medium text-white/90"},[l("Gateway 地址")]),e(c,{tag:!0,options:b.map(t=>({key:t,value:t,label:t})),filterable:!0,clearable:!0,value:a.gatewayUrl,onUpdateValue:t=>{a.gatewayUrl=t},class:"setup-api-select"},null)]),e("div",{class:"mb-6 flex items-center justify-between"},[e("span",{class:"text-sm text-white/90"},[l("持久化保存")]),e(v,{value:a.persist,onUpdateValue:t=>{a.persist=t}},null)]),e("div",{class:"flex gap-3"},[e("button",{type:"button",onClick:g,"aria-label":"本地调试",class:"flex h-10 flex-1 items-center justify-center gap-2 rounded-full bg-white/15 text-sm text-white/90 backdrop-blur-sm transition-all hover:bg-white/25 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50"},[e(S,{class:"h-4 w-4","aria-hidden":"true"},null),e("span",null,[l("本地调试")])]),e("button",{type:"button",onClick:d,"aria-label":"重置",class:"flex h-10 flex-1 items-center justify-center gap-2 rounded-full bg-white/15 text-sm text-white/90 backdrop-blur-sm transition-all hover:bg-white/25 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50"},[e(_,{class:"h-4 w-4","aria-hidden":"true"},null),e("span",null,[l("重置")])]),e("button",{type:"submit","aria-label":"确定",class:"flex h-10 flex-1 items-center justify-center gap-2 rounded-full bg-white/90 text-sm font-medium text-neutral-900 transition-all hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50"},[e(U,{class:"h-4 w-4","aria-hidden":"true"},null),e("span",null,[l("确定")])])])])])])}}),m=a=>a?a.startsWith("http")?a:`${["localhost","127.0.0.1"].includes(a)?"http":"https"}://${a}`:"";export{D as default};
