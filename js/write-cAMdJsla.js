import{d as y,r as b,a3 as w,o as C,R as r,a4 as I,a as P,b as x,c as t,F as i,I as R,a5 as S,a6 as B,a7 as E,H as k,a8 as H,C as M,a9 as N,y as D,aa as F,ab as T,Z as U,ac as V,ad as d,ae as L,af as $,ag as A,ah as W,V as q,ai as z}from"./index-DYAtJ7FT.js";const Z=y(()=>{const c=U(),g=()=>({text:"",title:"",order:0,slug:"",subtitle:"",allowComment:!0,id:void 0,images:[],meta:void 0}),p=e=>I(a)(e),a=b(g()),s=w(()=>c.query.id);C(async()=>{const e=s.value;if(e&&typeof e=="string"){const o=(await r.api.pages(e).get({})).data;p(o)}});const n=P(!1),u=x(),m=D(),f=async()=>{const e=()=>{try{if(!a.title||a.title.trim().length==0)throw"标题为空";if(!a.slug)throw"路径为空";return{...T(a),title:a.title.trim(),slug:a.slug.trim()}}catch(l){throw u.error(l),l}};if(s.value){if(!N(s.value))return;const l=s.value;await r.api.pages(l).put({data:e()}),u.success("修改成功")}else await r.api.pages.post({data:e()}),u.success("发布成功");m.push({name:F.ListPage,hash:"|publish"})};return()=>t(M,{headerClass:"pt-1",actionsElement:t(i,null,[t(B,{data:a,onHandleYamlParsedMeta:e=>{const{title:l,slug:o,subtitle:v,...h}=e;a.title=l??a.title,a.slug=o??a.slug,a.subtitle=v??a.subtitle,a.meta={...h}}},null),t(E,{iframe:!0,data:a},null),t(k,{icon:t(H,null,null),onClick:f},null)]),footerButtonElement:t(i,null,[t("button",{onClick:()=>{n.value=!0}},[t(R,null,{default:()=>[t(S,null,null)]})])])},{default:()=>[t(V,{class:"relative z-10 mt-3",label:"与你有个好心情~",value:a.title,onChange:e=>{a.title=e}},null),t("div",{class:"pt-3 text-gray-700 dark:text-gray-300"},[t(d,{value:a.subtitle,onChange:e=>void(a.subtitle=e)},null)]),t("div",{class:"py-3 text-gray-500"},[t("label",null,[`${L}/`]),t(d,{value:a.slug,onChange:e=>void(a.slug=e)},null)]),t($,null,{default:()=>[t(A,{key:a.id,loading:!!(s.value&&typeof a.id>"u"),onChange:e=>{a.text=e},text:a.text},null)]}),t(W,{disabledItem:["date-picker"],onUpdateShow:e=>{n.value=e},data:a,show:n.value},{default:()=>[t(q,{label:"页面顺序"},{default:()=>[t(z,{placeholder:"",value:a.order,onUpdateValue:e=>void(a.order=e??0)},null)]})]})]})});export{Z as default};
