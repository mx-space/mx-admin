import{d as m,O as c,h as a,aB as d,bq as p,b7 as y,m as f,i as s,B as h,Y as g,s as x,d4 as C}from"./index-DoEgFLcO.js";import{h as r}from"./health-5f4K94HO.js";import{u as b}from"./use-table-D96xVSJy.js";import"./index-DccAlwPk.js";import"./___vite-browser-external_commonjs-proxy-BydVfZl6.js";const N=m({setup(){const{data:o,fetchDataFn:i,loading:u}=b(e=>async()=>{const t=await r.getCronList();e.value=Array.from(Object.values(t).map(n=>({...n,_name:n.name,name:C(n.name)})))});c(async()=>{await i()});const l=async(e,t)=>{await r.runCron(e),x.success(`${t} 已开始执行`)};return()=>a(g,null,[a(d,{noPagination:!0,data:o,loading:u.value,nTableProps:{maxHeight:"calc(100vh - 17rem)"},maxWidth:500,columns:[{title:"任务",key:"name",ellipsis:{tooltip:!0},width:150},{title:"描述",key:"description",width:250,ellipsis:{tooltip:!0}},{title:"状态",key:"status"},{title:"下次执行",key:"",render(e){const t=e.nextDate;return t?p(new Date(t),"MM/dd/yyyy hh:mm:ss"):"N/A"}},{title:"操作",key:"",render(e){return a(y,null,{default:()=>[a(f,{onPositiveClick:()=>void l(e._name,e.name)},{trigger(){return a(h,{size:"tiny",quaternary:!0,type:"primary"},{default:()=>[s("执行")]})},default:()=>a("span",{class:"max-w-48"},[s("确定要执行？")])})]})}}]},null)])}});export{N as default};
